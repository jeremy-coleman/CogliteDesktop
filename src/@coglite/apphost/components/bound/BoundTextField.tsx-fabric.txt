import { observer } from 'mobx-react';
import { ITextFieldProps, TextField } from 'office-ui-fabric-react';
import * as React from 'react';

//import MuiTextField, {TextFieldProps} from '@material-ui/core/TextField'

import { getBoundValue, getErrorMessage, setBoundValue } from '../../models';
import {IBoundProps, IError} from '../../types'

interface IBoundTextFieldProps extends ITextFieldProps, IBoundProps<any, string> {
    errors?: IError[];
}

@observer
class BoundTextField extends React.Component<IBoundTextFieldProps, any> {
    private _onChanged = (e, value : string) => {
        setBoundValue(this.props, value);
        if(this.props.onChange) {
            this.props.onChange(e, value);
        }
    }
    render() {
        const value = getBoundValue(this.props);
        return <TextField {...this.props}
                         onChange={this._onChanged}
                         value={value || ""}
                         errorMessage={getErrorMessage(this.props, this.props.errors)} />
    }
}

export { IBoundTextFieldProps, BoundTextField }